<nav role="navigation" aria-label="Breadcrumbs" class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb">
  <ol class="trail-items" itemscope itemtype="http://schema.org/BreadcrumbList">
    {{ template "breadcrumbitemlistelement" (dict "current" . "leaf" .) }}
  </ol>
</nav>

{{ define "breadcrumbitemlistelement" }}
  {{ if .current.Parent }}
    {{ template "breadcrumbitemlistelement" (dict "current" .current.Parent "leaf" .leaf) }}
  {{ else if not .current.IsHome }}
    {{ template "breadcrumbitemlistelement" (dict "current" .current.Site.Home "leaf" .leaf) }}
  {{ end }}
  {{ if not (.current.Param "noBreadcrumb") }}
    <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item {{ if .current.IsHome }}trail-begin{{ end }} {{ if eq .current .leaf }}trail-end{{ end }}">
      {{ if eq .current .leaf }}
        <span itemprop="item" aria-current="page">
          {{- template "breadcrumbname" (dict "p" .current ) -}}
        </span>
      {{ else }}
        <a href="{{ .current.Permalink }}" itemprop="item">
          {{- template "breadcrumbname" (dict "p" .current ) -}}
        </a>
      {{ end }}
    </li>
  {{end}}
{{ end }}

{{ define "breadcrumbname" }}
  <span itemprop="name">{{ .p.Param "breadcrumb" | default .p.Title | markdownify }}</span>
{{ end }}
